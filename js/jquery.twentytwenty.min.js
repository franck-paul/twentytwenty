(t=>{t.fn.twentytwenty=function(e){const n=t.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},e);return this.each(function(){let e=n.default_offset_pct;const s=t(this),a=n.orientation,i="vertical"===a?"down":"left",o="vertical"===a?"up":"right";if(s.wrap(`<div class='twentytwenty-wrapper twentytwenty-${a}'></div>`),!n.no_overlay){s.append("<div class='twentytwenty-overlay'></div>");const t=s.find(".twentytwenty-overlay");t.append(`<div class='twentytwenty-before-label' data-content='${n.before_label}'></div>`),t.append(`<div class='twentytwenty-after-label' data-content='${n.after_label}'></div>`)}const l=s.find("img:first"),c=s.find("img:last");s.append("<div class='twentytwenty-handle'></div>");const d=s.find(".twentytwenty-handle");d.append(`<span class='twentytwenty-${i}-arrow'></span>`),d.append(`<span class='twentytwenty-${o}-arrow'></span>`),s.addClass("twentytwenty-container"),l.addClass("twentytwenty-before"),c.addClass("twentytwenty-after");const r=t=>{const e=(t=>{const e=l.width(),n=l.height();return{w:`${e}px`,h:`${n}px`,cw:t*e+"px",ch:t*n+"px"}})(t);d.css("vertical"===a?"top":"left","vertical"===a?e.ch:e.cw),(t=>{"vertical"===a?(l.css("clip",`rect(0,${t.w},${t.ch},0)`),c.css("clip",`rect(${t.ch},${t.w},${t.h},0)`)):(l.css("clip",`rect(0,${t.cw},${t.h},0)`),c.css("clip",`rect(0,${t.w},${t.h},${t.cw})`)),s.css("height",t.h)})(e)},w=(t,e)=>{const n="vertical"===a?(e-f)/y:(t-v)/p;return s=n,i=0,o=1,Math.max(i,Math.min(o,s));var s,i,o};t(window).on("resize.twentytwenty",t=>{r(e)});let v=0,f=0,p=0,y=0;const h=t=>{((t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==a||(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===a)&&t.preventDefault(),s.addClass("active"),v=s.offset().left,f=s.offset().top,p=l.width(),y=l.height()},_=t=>{s.hasClass("active")&&(e=w(t.pageX,t.pageY),r(e))},m=()=>{s.removeClass("active")},u=n.move_with_handle_only?d:s;u.on("movestart",h),u.on("move",_),u.on("moveend",m),n.move_slider_on_hover&&(s.on("mouseenter",h),s.on("mousemove",_),s.on("mouseleave",m)),d.on("touchmove",t=>{t.preventDefault()}),s.find("img").on("mousedown",t=>{t.preventDefault()}),n.click_to_move&&s.on("click",t=>{v=s.offset().left,f=s.offset().top,p=l.width(),y=l.height(),e=w(t.pageX,t.pageY),r(e)}),t(window).trigger("resize.twentytwenty")})}})(jQuery);
